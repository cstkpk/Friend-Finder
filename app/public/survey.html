<!DOCTYPE html>
<html lang="en-us">
    
<head>
    <meta charset="UTF-8">
    <title>Friend Finder</title>
    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!-- Font Awesome icons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <!-- If I insert my own stylehseet -->
</head>

<body>

    <div class="container">

        <h1>Survey Questions</h1>
        <hr>

        <form>
            <div class="form-group">
                <h3>About You:</h3>
                <label for="name">Name (Required)</label>
                <input type="email" class="form-control" id="name" placeholder="Your Name Here">
                <div class="invalid-feedback">
                    Please provide your name.
                </div>
            </div>
            <div class="form-group">
                <label for="photo">Photo (Required)</label>
                <input type="email" class="form-control" id="photo" placeholder="Insert link to photo here">
            </div>
            <hr>

            <h3>Question 1</h3>
            <label for="q1">First question here</label><br>
            <select class="chosen-select" id="q1">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select><br><br>
            <h3>Question 2</h3>
            <label for="q2">First question here</label><br>
            <select class="chosen-select" id="q2">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select><br><br>
            <h3>Question 3</h3>
            <label for="q3">First question here</label><br>
            <select class="chosen-select" id="q3">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select><br><br>
            <h3>Question 4</h3>
            <label for="q4">First question here</label><br>
            <select class="chosen-select" id="q4">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select><br><br>
            <h3>Question 5</h3>
            <label for="q5">First question here</label><br>
            <select class="chosen-select" id="q5">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select><br><br>
            <h3>Question 6</h3>
            <label for="q6">First question here</label><br>
            <select class="chosen-select" id="q6">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select><br><br>
            <h3>Question 7</h3>
            <label for="q7">First question here</label><br>
            <select class="chosen-select" id="q7">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select><br><br>
            <h3>Question 8</h3>
            <label for="q8">First question here</label><br>
            <select class="chosen-select" id="q8">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select><br><br>
            <h3>Question 9</h3>
            <label for="q9">First question here</label><br>
            <select class="chosen-select" id="q9">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select><br><br>
            <h3>Question 10</h3>
            <label for="q10">First question here</label><br>
            <select class="chosen-select" id="q10">
                <option value="">Select an option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
            <br><br>
            <button class="btn btn-primary" id="submit" type="submit"><i class="fa fa-check-circle"></i> Submit form</button>
        </form>

        <hr>
        <footer class="footer">
            <div class="container">
              <p>
                <a href="/api/friends">API Friends List</a> |
                <a href="#">Github Repo</a>
            </div>
        </footer>

        <!-- Form validation modal -->
        <div class="modal" tabindex="-1" role="dialog" id="modal-validation">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Hey there!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Please fill out all of the questions.</p>
                </div>
                </div>
            </div>
        </div>
        <!-- Match modal -->
        <div class="modal" tabindex="-1" role="dialog" id="modal-match">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Results</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Your new best friend is: <span id="match-name"></span></p>
                    <img id="match-photo" src="" alt="">
                </div>
                </div>
            </div>
        </div>
        

    </div>


<script type="text/javascript">
    
// Retrieve user input
$("#submit").on("click", function(event) {
    event.preventDefault();
    // Form validation
    function validateForm() {
        var isValid = true;
        $(".form-control").each(function() {
            if ($(this).val() === "") {
                isValid = false;
                console.log("Invalid input");
            }
        });

        $(".chosen-select").each(function() {
            if ($(this).val() === "") {
                isValid = false;
                console.log("Invalid input");
            }
        });
        console.log("Form validation finished");
        return isValid;
    }

    // function formAlerts() {
    //     var forms = $(".form-control");
    // }
    
    // If form validation returns as true, create an object to hold user's input
    if (validateForm()) {
        var userAnswers = {
          name: $("#name").val(),
          photo: $("#photo").val(),
          options: [
            $("#q1").val(),
            $("#q2").val(),
            $("#q3").val(),
            $("#q4").val(),
            $("#q5").val(),
            $("#q6").val(),
            $("#q7").val(),
            $("#q8").val(),
            $("#q9").val(),
            $("#q10").val()
          ]
        };

        console.log(userAnswers);

        // Post user input to /api/friends
        $.post("/api/friends", userAnswers, function(data) {

            // Grab match here
            // (Just console log testing for now)
            console.log(data);
            console.log("api/friends post successful");
            // Show results modal
            $("#modal-match").modal("show");
            // Clear out user input fields
            $(".form-control").val("");
            $(".chosen select").val(""); // This doesn't clear out the fields like I thought it would. Come back later

        });
    
    } 
    // If form validation returns as false, tell the user to fill out all of the questions
    else {
        $("#modal-validation").modal("show");
        // alert("Please answer all of the questions!");
        // formAlerts();
    }
});

</script>

</body>

</html>